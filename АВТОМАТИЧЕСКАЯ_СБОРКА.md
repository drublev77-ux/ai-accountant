# ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÐ±Ð¾Ñ€ÐºÐ° Android AAB Ñ‡ÐµÑ€ÐµÐ· GitHub Actions

## ÐžÐ±Ð·Ð¾Ñ€

Ð’Ð°Ñˆ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð´Ð»Ñ **Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÐ±Ð¾Ñ€ÐºÐ¸** Android App Bundle (AAB) Ñ‡ÐµÑ€ÐµÐ· GitHub Actions. Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ push Ð² Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð¸Ð»Ð¸ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ñ‡ÐµÑ€ÐµÐ· Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ GitHub.

## ÐšÐ¾Ð³Ð´Ð° Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ ÑÐ±Ð¾Ñ€ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸

### 1. ÐŸÑ€Ð¸ Push Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð²ÐµÑ‚ÐºÐ¸
```bash
# Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ñ€Ð¸ push Ð²:
git push origin main       # â†’ Release AAB
git push origin develop    # â†’ Release AAB
```

### 2. ÐŸÑ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Pull Request
```bash
# Ð¡Ð±Ð¾Ñ€ÐºÐ° debug Ð²ÐµÑ€ÑÐ¸Ð¸ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
git push origin feature-branch
# Ð—Ð°Ñ‚ÐµÐ¼ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ PR â†’ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ð±ÐµÑ€ÐµÑ‚ÑÑ Debug AAB
```

### 3. Ð ÑƒÑ‡Ð½Ð¾Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ñ‡ÐµÑ€ÐµÐ· GitHub
1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ https://github.com/Ð²Ð°Ñˆ-Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ/Ð²Ð°Ñˆ-Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹/actions
2. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ **"Build Android AAB"**
3. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"Run workflow"**
4. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ ÑÐ±Ð¾Ñ€ÐºÐ¸: `debug` Ð¸Ð»Ð¸ `release`
5. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"Run workflow"** â†’ ÑÐ±Ð¾Ñ€ÐºÐ° Ð½Ð°Ñ‡Ð½ÐµÑ‚ÑÑ Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾

## ÐŸÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°

### Ð¨Ð°Ð³ 1: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ keystore Ð´Ð»Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ keystore Ñ„Ð°Ð¹Ð» (Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Java keytool)
keytool -genkey -v -keystore release.keystore \
  -alias ai-accountant \
  -keyalg RSA \
  -keysize 2048 \
  -validity 10000

# Ð’Ð°Ñ Ð¿Ð¾Ð¿Ñ€Ð¾ÑÑÑ‚ Ð²Ð²ÐµÑÑ‚Ð¸:
# - ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð´Ð»Ñ keystore (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: MySecurePassword123)
# - ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð´Ð»Ñ ÐºÐ»ÑŽÑ‡Ð° (Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ñ‚Ð°ÐºÐ¸Ð¼ Ð¶Ðµ)
# - Ð’Ð°ÑˆÐµ Ð¸Ð¼Ñ, Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸ÑŽ, Ð³Ð¾Ñ€Ð¾Ð´, ÑÑ‚Ñ€Ð°Ð½Ñƒ Ð¸ Ñ‚.Ð´.
```

**Ð’ÐÐ–ÐÐž:** Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ - Ð¾Ð½Ð¸ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ Ð´Ð»Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ GitHub Secrets!

### Ð¨Ð°Ð³ 2: ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ keystore Ð² Base64

```bash
# Linux/Mac:
cat release.keystore | base64 > release.keystore.base64

# Windows (PowerShell):
[Convert]::ToBase64String([IO.File]::ReadAllBytes("release.keystore")) > release.keystore.base64

# ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» release.keystore.base64 Ð¸ ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐµÐ³Ð¾ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ
cat release.keystore.base64
```

### Ð¨Ð°Ð³ 3: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ GitHub Secrets

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð²Ð°Ñˆ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð½Ð° GitHub
2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² **Settings** â†’ **Secrets and variables** â†’ **Actions**
3. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"New repository secret"** Ð¸ Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ 4 ÑÐµÐºÑ€ÐµÑ‚Ð°:

| Secret Name | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ | ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ |
|-------------|----------|-----------------|
| `ANDROID_KEYSTORE_BASE64` | Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ñ„Ð°Ð¹Ð»Ð° `.base64` | `MIIKxwIBAzCCCoMGCSqGSIb3DQ...` |
| `ANDROID_KEYSTORE_PASSWORD` | ÐŸÐ°Ñ€Ð¾Ð»ÑŒ keystore | `MySecurePassword123` |
| `ANDROID_KEY_PASSWORD` | ÐŸÐ°Ñ€Ð¾Ð»ÑŒ ÐºÐ»ÑŽÑ‡Ð° | `MySecurePassword123` |
| `ANDROID_KEY_ALIAS` | Alias ÐºÐ»ÑŽÑ‡Ð° | `ai-accountant` |

### Ð¨Ð°Ð³ 4: Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð½Ð° GitHub

```bash
# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ remote Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹
git remote add origin https://github.com/Ð²Ð°Ñˆ-Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ/ai-accountant.git

# Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ ÐºÐ¾Ð´
git push -u origin main
```

**ÐÐ’Ð¢ÐžÐœÐÐ¢Ð˜Ð§Ð•Ð¡ÐšÐ˜ ÐÐÐ§ÐÐ•Ð¢Ð¡Ð¯ Ð¡Ð‘ÐžÐ ÐšÐ!**

## ÐšÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÐ±Ð¾Ñ€ÐºÐ°

### ÐŸÑ€Ð¾Ñ†ÐµÑÑ ÑÐ±Ð¾Ñ€ÐºÐ¸ (Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸)

1. **Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ**
   - âœ… Node.js 20
   - âœ… Java JDK 17
   - âœ… Android SDK (API 34, Build Tools 34.0.0)

2. **Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ**
   - âœ… `npm ci` - ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
   - âœ… `npm run build` - ÑÐ±Ð¾Ñ€ÐºÐ° React Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

3. **Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ Capacitor**
   - âœ… `npx cap sync android` - ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²ÐµÐ±-Ñ„Ð°Ð¹Ð»Ð¾Ð²

4. **Ð¡Ð±Ð¾Ñ€ÐºÐ° Android AAB**
   - âœ… Ð”ÐµÐºÐ¾Ð´Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ keystore Ð¸Ð· Base64
   - âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ `key.properties`
   - âœ… `./gradlew bundleRelease` Ð¸Ð»Ð¸ `bundleDebug`

5. **Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²**
   - âœ… AAB Ñ„Ð°Ð¹Ð» Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð² Artifacts
   - âœ… Mapping Ñ„Ð°Ð¹Ð» (Ð´Ð»Ñ ProGuard/R8)

### Ð¡ÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ð³Ð¾ AAB

1. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² **Actions** Ð²ÐºÐ»Ð°Ð´ÐºÑƒ Ð²Ð°ÑˆÐµÐ³Ð¾ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ
2. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¹ workflow run (Ð·ÐµÐ»ÐµÐ½Ð°Ñ Ð³Ð°Ð»Ð¾Ñ‡ÐºÐ° âœ…)
3. ÐŸÑ€Ð¾ÐºÑ€ÑƒÑ‚Ð¸Ñ‚Ðµ Ð²Ð½Ð¸Ð· Ð´Ð¾ ÑÐµÐºÑ†Ð¸Ð¸ **Artifacts**
4. Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ:
   - **android-release-aab** (Ð´Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð² Google Play)
   - **android-debug-aab** (Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)

**Ð¤Ð°Ð¹Ð»Ñ‹ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ:**
- Release AAB: 30 Ð´Ð½ÐµÐ¹
- Debug AAB: 14 Ð´Ð½ÐµÐ¹
- Mapping Ñ„Ð°Ð¹Ð»Ñ‹: 90 Ð´Ð½ÐµÐ¹

## Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ¾Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾ AAB

### Ð”Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ (Debug AAB)

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð½Ð° Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾ Ñ‡ÐµÑ€ÐµÐ· bundletool
bundletool build-apks \
  --bundle=app-debug.aab \
  --output=app-debug.apks \
  --mode=universal

# Ð˜Ð·Ð²Ð»ÐµÐºÐ¸Ñ‚Ðµ APK Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ
unzip app-debug.apks -d apks
adb install apks/universal.apk
```

### Ð”Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ (Release AAB)

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ [Google Play Console](https://play.google.com/console)
2. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ (Ð¸Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ð¾Ðµ)
3. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² **Release** â†’ **Production** â†’ **Create new release**
4. Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ `app-release.aab`
5. Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Release notes
6. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **Review release** â†’ **Start rollout to Production**

## ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ‚Ñ€Ð¸Ð³Ð³ÐµÑ€Ñ‹ ÑÐ±Ð¾Ñ€ÐºÐ¸

### Push Ð² main/develop
```yaml
on:
  push:
    branches:
      - main
      - develop
```
**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Release AAB

### Pull Request
```yaml
on:
  pull_request:
    branches:
      - main
      - develop
```
**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Debug AAB (Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹)

### Ð ÑƒÑ‡Ð½Ð¾Ð¹ Ð·Ð°Ð¿ÑƒÑÐº
```yaml
on:
  workflow_dispatch:
    inputs:
      build_type:
        type: choice
        options:
          - debug
          - release
```
**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ð¹ Ñ‚Ð¸Ð¿ AAB

## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° ÑÐ±Ð¾Ñ€ÐºÐ¸

### Email ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
GitHub Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ email Ð¿Ñ€Ð¸:
- âœ… Ð£ÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ ÑÐ±Ð¾Ñ€ÐºÐµ
- âŒ ÐžÑˆÐ¸Ð±ÐºÐµ ÑÐ±Ð¾Ñ€ÐºÐ¸

### Badge Ð² README
Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ badge ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð² Ð²Ð°Ñˆ README.md:

```markdown
![Android Build](https://github.com/Ð²Ð°Ñˆ-Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ/ai-accountant/actions/workflows/android-build.yml/badge.svg)
```

### ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ **Actions** â†’ Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ workflow run
2. ÐšÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ Ð½Ð° **Build Android App Bundle**
3. Ð Ð°ÑÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð½ÑƒÐ¶Ð½Ñ‹Ð¹ ÑˆÐ°Ð³ Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð»Ð¾Ð³Ð¾Ð²

## ÐžÑ‚Ð»Ð°Ð´ÐºÐ° Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

### Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¿Ð°Ð´Ð°ÐµÑ‚ Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¸
```
âŒ Error: Keystore file not found
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ `ANDROID_KEYSTORE_BASE64` ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Base64
- Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ 4 ÑÐµÐºÑ€ÐµÑ‚Ð° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹

### Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¿Ð°Ð´Ð°ÐµÑ‚ Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹ Gradle
```
âŒ Execution failed for task ':app:bundleRelease'
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Gradle Ð² Actions
- Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ `android/app/build.gradle` Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾

### Debug ÑÐ±Ð¾Ñ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚, Release Ð¿Ð°Ð´Ð°ÐµÑ‚
```
âŒ Task :app:lintVitalRelease FAILED
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
- Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ lint Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð² `android/app/build.gradle`:
```gradle
android {
    lintOptions {
        checkReleaseBuilds false
        abortOnError false
    }
}
```

## Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð°Ñ ÑÐ±Ð¾Ñ€ÐºÐ° (Ð±ÐµÐ· GitHub Actions)

Ð•ÑÐ»Ð¸ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ AAB Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾:

```bash
# 1. Ð¡Ð¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
npm run build

# 2. Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ Capacitor
npx cap sync android

# 3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ key.properties Ð² android/
cat > android/key.properties << EOF
storePassword=MySecurePassword123
keyPassword=MySecurePassword123
keyAlias=ai-accountant
storeFile=keystore/release.keystore
EOF

# 4. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ keystore
mkdir -p android/app/keystore
cp release.keystore android/app/keystore/

# 5. Ð¡Ð¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ AAB
cd android
./gradlew bundleRelease

# AAB Ð±ÑƒÐ´ÐµÑ‚ Ð²: android/app/build/outputs/bundle/release/app-release.aab
```

## Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸

1. âœ… **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ GitHub Secrets** (ÑÐ¼. Ð¨Ð°Ð³ 3)
2. âœ… **Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ ÐºÐ¾Ð´ Ð½Ð° GitHub** â†’ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÐ±Ð¾Ñ€ÐºÐ° Ð½Ð°Ñ‡Ð½ÐµÑ‚ÑÑ
3. âœ… **Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ AAB** Ð¸Ð· Artifacts
4. âœ… **Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð² Google Play Console**

## ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ ÑÐ±Ð¾Ñ€ÐºÐ¸
gh workflow view "Build Android AAB"

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐ±Ð¾Ñ€ÐºÑƒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ñ‡ÐµÑ€ÐµÐ· CLI
gh workflow run android-build.yml -f build_type=release

# Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ artifact
gh run download

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð»Ð¾Ð³Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ ÑÐ±Ð¾Ñ€ÐºÐ¸
gh run view --log
```

## ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

Ð•ÑÐ»Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð² GitHub Actions
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ ÑÐµÐºÑ€ÐµÑ‚Ñ‹ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹
3. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½ÑƒÑŽ ÑÐ±Ð¾Ñ€ÐºÑƒ Ð´Ð»Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸

Ð’Ð°ÑˆÐ° ÑÐ±Ð¾Ñ€ÐºÐ° Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°! ðŸš€
